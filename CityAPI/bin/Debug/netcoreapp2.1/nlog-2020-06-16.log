2020-06-16 13:07:23.4284|INFO|CityAPI.Program|initializing application...
2020-06-16 13:07:26.8309|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:07:28.6955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:07:28.7566|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:07:38.9921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (200ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:07:39.0581|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:07:39.1226|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:07:39.1226|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:07:39.1226|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:07:39.1463|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:07:39.1659|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:07:39.1724|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:07:39.1724|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:07:39.1858|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:07:39.1858|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:07:39.2428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:07:39.2561|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:07:39.2723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:07:39.2955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:07:39.2955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:07:39.3664|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:07:39.9928|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/  
2020-06-16 13:07:39.9928|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:07:39.9928|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:07:40.0203|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 28.4621ms 200 
2020-06-16 13:07:40.1039|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 117.1348ms 404 text/plain
2020-06-16 13:07:40.1489|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCities() on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:07:40.3418|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/favicon.ico  
2020-06-16 13:07:40.3418|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 10.5146ms 404 text/plain
2020-06-16 13:07:40.4857|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCities (CityAPI) - Validation state: Valid
2020-06-16 13:07:40.5062|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:07:40.6047|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
ORDER BY [m].[Name]
2020-06-16 13:07:40.6255|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCities (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 132.688ms.
2020-06-16 13:07:40.6255|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityAPI.Models.CityWithoutPoiDto, CityAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-06-16 13:07:40.6885|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCities (CityAPI) in 532.7054ms
2020-06-16 13:07:40.6885|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 712.8324ms 200 application/json; charset=utf-8
2020-06-16 13:09:58.5579|INFO|CityAPI.Program|initializing application...
2020-06-16 13:10:01.1116|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:10:02.3098|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:10:02.3358|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:10:12.6333|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (261ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:10:12.7138|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:10:12.7749|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:10:12.7885|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:10:12.7939|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:10:12.7939|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:10:12.8197|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:10:12.8265|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:10:12.8265|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:10:12.8265|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:10:12.8437|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:10:12.8902|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:10:12.9036|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:10:12.9036|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:10:12.9323|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:10:12.9380|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:10:13.0002|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:10:13.5941|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:10:13.5941|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:10:13.6258|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 50.8145ms 200 
2020-06-16 13:10:13.6966|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 126.5923ms 404 text/plain
2020-06-16 13:10:14.9701|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/4  
2020-06-16 13:10:15.0092|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:10:15.2469|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:10:15.2736|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:10:15.3596|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
ORDER BY [m].[Name]
2020-06-16 13:10:15.3876|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.NotFoundResult in 133.0572ms.
2020-06-16 13:10:15.3876|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing HttpStatusCodeResult, setting HTTP status code 404
2020-06-16 13:10:15.4051|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 388.1366ms
2020-06-16 13:10:15.4051|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 443.9305ms 404 text/plain
2020-06-16 13:10:52.3310|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3  
2020-06-16 13:10:52.3430|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:10:52.3430|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:10:52.3430|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:10:52.3605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
ORDER BY [m].[Name]
2020-06-16 13:10:52.3824|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.0912ms.
2020-06-16 13:10:52.4040|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Models.CityWithoutPoiDto'.
2020-06-16 13:10:52.4670|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 120.021ms
2020-06-16 13:10:52.4670|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 140.7478ms 200 application/json; charset=utf-8
2020-06-16 13:11:06.9189|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:11:06.9189|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:11:06.9189|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:11:12.6004|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:11:12.6053|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
ORDER BY [m].[Name]
2020-06-16 13:11:12.6053|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5676.6899ms.
2020-06-16 13:11:12.6053|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Models.CityWithoutPoiDto'.
2020-06-16 13:11:12.6053|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 5692.2456ms
2020-06-16 13:11:12.6246|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 5705.7582ms 200 application/json; charset=utf-8
2020-06-16 13:13:38.2635|INFO|CityAPI.Program|initializing application...
2020-06-16 13:13:40.7251|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:13:41.9080|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:13:41.9391|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:13:52.3086|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (323ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:13:52.3983|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (83ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:13:52.5115|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:13:52.5115|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:13:52.5115|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:13:52.5354|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:13:52.5544|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:13:52.5622|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:13:52.5622|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:13:52.5622|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:13:52.5808|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:13:52.6232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:13:52.6232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:13:52.6426|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:13:52.6546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:13:52.6546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:13:52.7131|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:13:53.0331|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:13:53.0331|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:13:53.0529|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 22.9973ms 200 
2020-06-16 13:13:53.1222|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 91.3458ms 404 text/plain
2020-06-16 13:14:18.2401|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:14:18.2811|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:14:18.5436|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:14:22.1912|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:14:22.3537|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:14:22.4073|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointOfInterestDto] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:14:22.4219|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:0ae67106-be77-4ad7-b343-8864e34b649b
Error Number:208,State:1,Class:16
2020-06-16 13:14:22.4481|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:0ae67106-be77-4ad7-b343-8864e34b649b
Error Number:208,State:1,Class:16
2020-06-16 13:16:26.5749|INFO|CityAPI.Program|initializing application...
2020-06-16 13:16:29.0124|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:16:30.2850|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (48ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:16:30.3156|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:16:40.6706|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (305ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:16:40.7421|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:16:40.8196|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:16:40.8278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:16:40.8278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:16:40.8413|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:16:40.8606|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:16:40.8717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:16:40.8717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:16:40.8717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:16:40.8921|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:16:40.9388|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:16:40.9534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:16:40.9534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:16:40.9795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:16:40.9890|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:16:41.0471|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:16:41.4533|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:16:41.4533|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:16:41.4533|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:16:41.4873|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 29.6304ms 200 
2020-06-16 13:16:41.5695|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 116.1496ms 404 text/plain
2020-06-16 13:16:41.6095|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:16:41.9041|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:16:41.9041|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:16:42.0434|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:16:42.0717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointsOfInterest] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:16:42.0953|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 185.356ms.
2020-06-16 13:16:42.0953|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Models.CityWithoutPoiDto'.
2020-06-16 13:16:42.1593|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 543.0868ms
2020-06-16 13:16:42.1677|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 717.1203ms 200 application/json; charset=utf-8
2020-06-16 13:16:59.0898|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:16:59.1118|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:16:59.1264|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:17:10.2775|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:17:10.4916|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:17:16.0773|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointsOfInterest] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:18:08.2970|INFO|CityAPI.Program|initializing application...
2020-06-16 13:18:11.0568|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:18:15.7689|INFO|CityAPI.Program|initializing application...
2020-06-16 13:18:16.6624|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:18:17.7824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:18:17.8115|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:18:28.0451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (217ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:18:28.1070|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (61ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:18:28.1872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:18:28.1872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:18:28.1872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:18:28.2015|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:18:28.2175|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:18:28.2175|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:18:28.2175|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:18:28.2175|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:18:28.2175|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:18:28.2789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:18:28.2789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:18:28.2977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:18:28.2977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:18:28.3094|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:18:28.3323|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:18:28.6840|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:18:28.7608|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 77.4326ms 404 text/plain
2020-06-16 13:18:34.3824|INFO|CityAPI.Program|initializing application...
2020-06-16 13:18:37.0019|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:18:38.2265|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:18:38.2677|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:18:48.5876|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (277ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:18:48.6887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (96ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:18:48.7615|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:18:48.7615|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:18:48.7615|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:18:48.7829|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:18:48.8028|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:18:48.8091|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:18:48.8091|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:18:48.8091|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:18:48.8280|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:18:48.8750|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:18:48.8750|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:18:48.8955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:18:48.9114|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:18:48.9114|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:18:48.9750|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:18:49.3896|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:18:49.3896|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:18:49.3896|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:18:49.4305|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 33.3635ms 200 
2020-06-16 13:18:49.5142|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 131.4859ms 404 text/plain
2020-06-16 13:18:49.5679|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:18:49.8774|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:18:51.4734|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:18:51.6113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:18:51.6663|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointOfInterestDto] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:18:51.6862|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:a1f70efa-1557-4b5e-9772-8010b23259d0
Error Number:208,State:1,Class:16
2020-06-16 13:18:51.7069|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:a1f70efa-1557-4b5e-9772-8010b23259d0
Error Number:208,State:1,Class:16
2020-06-16 13:22:57.3161|INFO|CityAPI.Program|initializing application...
2020-06-16 13:22:59.5366|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:23:00.5786|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:23:00.6071|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:23:11.0315|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (366ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:23:11.1301|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (92ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:23:11.1921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:23:11.1921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:23:11.2031|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:23:11.2031|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:23:11.2313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:23:11.2313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:23:11.2313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:23:11.2522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:23:11.2522|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:23:11.2995|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:23:11.3106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:23:11.3106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:23:11.3359|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:23:11.3414|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:23:11.3999|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:23:11.7110|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:23:11.7110|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:23:11.7303|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 20.2525ms 200 
2020-06-16 13:23:11.7989|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 91.795ms 404 text/plain
2020-06-16 13:24:49.6680|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:24:49.7455|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:24:49.9909|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:24:51.7810|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:24:51.9172|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
ORDER BY [c].[Id]
2020-06-16 13:24:51.9637|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [c.PointsOfInterest].[Id], [c.PointsOfInterest].[CityId], [c.PointsOfInterest].[Description], [c.PointsOfInterest].[Name]
FROM [PointOfInterestDto] AS [c.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [c0].[Id]
    FROM [Cities] AS [c0]
    WHERE [c0].[Id] = @__cityId_0
    ORDER BY [c0].[Id]
) AS [t] ON [c.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:24:51.9828|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:4a15a856-eebf-4614-85bd-85b4245669fd
Error Number:208,State:1,Class:16
2020-06-16 13:24:52.0018|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:4a15a856-eebf-4614-85bd-85b4245669fd
Error Number:208,State:1,Class:16
2020-06-16 13:27:32.4954|INFO|CityAPI.Program|initializing application...
2020-06-16 13:27:34.7643|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:27:35.8650|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:27:35.8937|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:27:46.2287|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (295ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:27:46.3173|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (82ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:27:46.4325|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:27:46.4402|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:27:46.4402|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:27:46.4560|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:27:46.4760|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:27:46.4828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:27:46.4828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:27:46.4828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:27:46.4984|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:27:46.5390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:27:46.5498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:27:46.5609|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:27:46.5771|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:27:46.5771|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:27:46.6334|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:27:47.0536|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:27:47.0536|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:27:47.0742|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 22.157ms 200 
2020-06-16 13:27:47.1402|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 87.3788ms 404 text/plain
2020-06-16 13:28:06.0340|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:28:06.0741|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:28:06.3075|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:28:07.9951|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:28:08.1153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:28:08.1714|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointOfInterestDto] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:28:08.1905|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:41aa827c-2118-4400-a51d-1b41d4ebba8e
Error Number:208,State:1,Class:16
2020-06-16 13:28:08.2112|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:41aa827c-2118-4400-a51d-1b41d4ebba8e
Error Number:208,State:1,Class:16
2020-06-16 13:28:23.0613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
2020-06-16 13:33:47.5857|INFO|CityAPI.Program|initializing application...
2020-06-16 13:33:49.9695|ERROR|CityAPI.Program|An error occurred while migrating the database
2020-06-16 13:33:50.0496|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:33:50.7220|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:33:50.6995|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:33:50.7472|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 50.1657ms 200 
2020-06-16 13:33:50.8153|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 118.0593ms 404 text/plain
2020-06-16 13:34:22.7365|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:34:22.7738|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:34:23.0406|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:40:26.0883|INFO|CityAPI.Program|initializing application...
2020-06-16 13:40:28.4762|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:40:28.7037|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:40:28.7298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:40:39.0576|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (278ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:40:39.1284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:40:39.1813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:40:39.1878|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:40:39.1878|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:40:39.1878|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:40:39.2170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:40:39.2232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:40:39.2232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:40:39.2336|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:40:39.2336|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:40:39.2688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:40:39.2688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:40:39.2885|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:40:39.3011|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:40:39.3011|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:40:39.3529|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:40:39.8833|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:40:39.8833|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:40:39.9065|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 23.1778ms 200 
2020-06-16 13:40:39.9660|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 83.6496ms 404 text/plain
2020-06-16 13:41:01.7836|INFO|CityAPI.Program|initializing application...
2020-06-16 13:41:04.1025|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:41:04.3549|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:41:04.3777|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:41:14.5995|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (195ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:41:14.6593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:41:14.7321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:41:14.7398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:41:14.7398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:41:14.7556|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:41:14.7883|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:41:14.7883|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:41:14.8018|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:41:14.8018|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:41:14.8018|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:41:14.8439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:41:14.8439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:41:14.8636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:41:14.8756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:41:14.8756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:41:14.9302|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:41:15.3235|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:41:15.3235|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:41:15.3468|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 22.6574ms 200 
2020-06-16 13:41:15.4211|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 98.9228ms 404 text/plain
2020-06-16 13:41:16.8436|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:41:16.8805|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:41:17.1406|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:41:17.1406|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:41:17.2645|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:41:17.3119|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointOfInterestDto] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:41:17.3271|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:46511f91-7bc9-4946-956e-cbe3cde43ab2
Error Number:208,State:1,Class:16
2020-06-16 13:41:17.3475|ERROR|Microsoft.EntityFrameworkCore.Query|An exception occurred in the database while iterating the results of a query for context type 'CityAPI.Contexts.CityContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PointOfInterestDto'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryBuffer.IncludeCollection[TEntity,TRelated,TElement](Int32 includeId, INavigation navigation, INavigation inverseNavigation, IEntityType targetEntityType, IClrCollectionAccessor clrCollectionAccessor, IClrPropertySetter inverseClrPropertySetter, Boolean tracking, TEntity entity, Func`1 relatedEntitiesFactory, Func`3 joinPredicate)
   at lambda_method(Closure , QueryContext , City , Object[] )
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler._Include[TEntity](QueryContext queryContext, TEntity entity, Object[] included, Action`3 fixup)
   at lambda_method(Closure , City )
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:46511f91-7bc9-4946-956e-cbe3cde43ab2
Error Number:208,State:1,Class:16
2020-06-16 13:41:58.7166|INFO|CityAPI.Program|initializing application...
2020-06-16 13:42:01.6240|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:42:01.9632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:42:01.9900|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:42:12.2562|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (230ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:42:12.3262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:42:12.4009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:42:12.4067|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:42:12.4067|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:42:12.4254|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:42:12.4461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:42:12.4566|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:42:12.4566|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:42:12.4566|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:42:12.4737|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:42:12.5095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:42:12.5262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:42:12.5421|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:42:12.5580|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:42:12.5622|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:42:12.6248|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:42:13.2047|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:42:13.2047|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:42:13.2047|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:42:13.2467|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 36.9204ms 200 
2020-06-16 13:42:13.3388|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 131.7973ms 404 text/plain
2020-06-16 13:42:13.3833|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:42:13.7795|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:42:13.8045|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:42:13.9303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:42:13.9621|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointsOfInterest] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:42:54.5994|INFO|CityAPI.Program|initializing application...
2020-06-16 13:42:56.8142|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:42:57.0530|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:42:57.0748|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:43:07.4196|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (299ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:43:07.5005|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:43:07.5570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:43:07.5630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:43:07.5630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:43:07.5778|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:43:07.6009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:43:07.6009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:43:07.6120|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:43:07.6120|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:43:07.6120|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:43:07.6554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:43:07.6646|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:43:07.6783|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:43:07.6929|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:43:07.6929|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:43:07.7502|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:43:08.2595|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:43:08.2595|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:43:08.2843|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 24.4279ms 200 
2020-06-16 13:43:08.3629|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 104.2145ms 404 text/plain
2020-06-16 13:43:28.0986|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:43:28.1379|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:43:28.4088|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:43:28.4443|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:43:28.5790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:43:28.6138|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointsOfInterest] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:43:56.3440|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 28195.4549ms
2020-06-16 13:43:56.4064|ERROR|Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware|An unhandled exception has occurred while executing the request.
2020-06-16 13:43:56.4665|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 28368.012ms 500 text/html; charset=utf-8
2020-06-16 13:44:00.5021|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3  
2020-06-16 13:44:00.5021|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:44:00.5222|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:44:00.5222|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:44:00.5400|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
2020-06-16 13:44:00.5509|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.2448ms.
2020-06-16 13:44:00.5650|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Models.CityDto'.
2020-06-16 13:44:00.6276|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 116.9373ms
2020-06-16 13:44:00.6276|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 130.3473ms 200 application/json; charset=utf-8
2020-06-16 13:45:55.2432|INFO|CityAPI.Program|initializing application...
2020-06-16 13:45:57.4450|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:45:57.6880|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:45:57.7124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:46:08.0778|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (321ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:46:08.1617|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:46:08.2184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:46:08.2243|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:46:08.2243|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:46:08.2401|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:46:08.2570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:46:08.2570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:46:08.2694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:46:08.2694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:46:08.2694|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:46:08.3113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:46:08.3222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:46:08.3312|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:46:08.3441|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:46:08.3441|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:46:08.4031|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:46:08.7648|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:46:08.7648|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:46:08.7996|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 36.652ms 200 
2020-06-16 13:46:08.8597|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 98.3935ms 404 text/plain
2020-06-16 13:46:28.2829|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3  
2020-06-16 13:46:28.3197|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:46:28.6079|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:46:28.6402|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:46:28.7205|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
2020-06-16 13:46:28.7514|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 137.601ms.
2020-06-16 13:46:28.7514|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Models.CityDto'.
2020-06-16 13:46:28.8124|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 484.6042ms
2020-06-16 13:46:28.8124|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 536.867ms 200 application/json; charset=utf-8
2020-06-16 13:46:52.4780|INFO|CityAPI.Program|initializing application...
2020-06-16 13:46:55.2166|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:46:55.4977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:46:55.5206|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:47:05.8270|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (258ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:47:05.9005|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (68ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:47:05.9636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:47:05.9721|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:47:05.9721|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:47:05.9943|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:47:06.0133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:47:06.0200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:47:06.0200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:47:06.0331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:47:06.0331|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:47:06.0756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:47:06.0857|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:47:06.1009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:47:06.1194|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:47:06.1194|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:47:06.1965|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:47:06.7193|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3  
2020-06-16 13:47:06.7193|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:47:06.7193|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:47:06.7556|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 36.1199ms 200 
2020-06-16 13:47:06.8399|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 128.9397ms 404 text/plain
2020-06-16 13:47:06.8899|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:47:07.2609|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:47:07.2812|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:47:07.3758|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
2020-06-16 13:47:07.4066|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 139.7601ms.
2020-06-16 13:47:07.4066|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Models.CityWithoutPoiDto'.
2020-06-16 13:47:07.4799|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 578.2656ms
2020-06-16 13:47:07.4923|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 778.1255ms 200 application/json; charset=utf-8
2020-06-16 13:47:11.1916|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:47:11.1916|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:47:11.2072|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:47:11.2072|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:47:11.2708|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:47:11.2894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointsOfInterest] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:51:26.2787|INFO|CityAPI.Program|initializing application...
2020-06-16 13:51:29.1945|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:51:29.4723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:51:29.4940|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:51:39.8423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (296ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:51:39.9328|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (84ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:51:39.9926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:51:39.9926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:51:40.0052|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:51:40.0052|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:51:40.0319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:51:40.0319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:51:40.0319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:51:40.0495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:51:40.0495|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:51:40.0862|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:51:40.0981|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:51:40.0981|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:51:40.1200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:51:40.1252|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:51:40.1752|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:51:40.5967|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:51:40.5967|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:51:40.6498|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 28.313ms 200 
2020-06-16 13:51:40.7257|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 127.1911ms 404 text/plain
2020-06-16 13:51:53.6339|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/3?includePointsOfInterest=true  
2020-06-16 13:51:53.6737|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 13:51:53.9868|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 13:51:54.0149|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:51:54.1445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
ORDER BY [m].[Id]
2020-06-16 13:51:54.1770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m.PointsOfInterest].[Id], [m.PointsOfInterest].[CityId], [m.PointsOfInterest].[Description], [m.PointsOfInterest].[Name]
FROM [PointsOfInterest] AS [m.PointsOfInterest]
INNER JOIN (
    SELECT TOP(1) [m0].[Id]
    FROM [Cities] AS [m0]
    WHERE [m0].[Id] = @__cityId_0
    ORDER BY [m0].[Id]
) AS [t] ON [m.PointsOfInterest].[CityId] = [t].[Id]
ORDER BY [t].[Id]
2020-06-16 13:51:54.2148|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 221.3917ms.
2020-06-16 13:51:54.2274|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Models.CityDto'.
2020-06-16 13:51:54.3001|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 613.4138ms
2020-06-16 13:51:54.3199|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 675.6775ms 200 application/json; charset=utf-8
2020-06-16 13:55:23.2277|INFO|CityAPI.Program|initializing application...
2020-06-16 13:55:25.6689|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:55:25.9292|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 13:55:25.9545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 13:55:36.2476|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (237ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 13:55:36.3367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (84ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 13:55:36.4700|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 13:55:36.4700|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 13:55:36.4700|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 13:55:36.4922|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 13:55:36.5153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 13:55:36.5223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 13:55:36.5332|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 13:55:36.5332|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 13:55:36.5499|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 13:55:36.5881|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:55:36.5999|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:55:36.6128|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 13:55:36.6286|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 13:55:36.6286|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 13:55:36.6909|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 13:55:37.2115|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 13:55:37.2115|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 13:55:37.2115|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/1/pointsofinterest  
2020-06-16 13:55:37.2412|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 33.769ms 200 
2020-06-16 13:55:37.3386|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 138.2044ms 404 text/plain
2020-06-16 13:55:37.3983|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointsOfInterest(Int32) on controller CityAPI.Controllers.PointsOfInterestController (CityAPI).
2020-06-16 13:55:37.4507|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.PointsOfInterestController.GetPointsOfInterest (CityAPI) - Validation state: Valid
2020-06-16 13:55:37.5002|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:55:37.5002|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.PointsOfInterestController.GetPointsOfInterest (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.4993ms.
2020-06-16 13:55:37.5290|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[CityAPI.Entities.PointOfInterest, CityAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-06-16 13:55:37.6794|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [m].[Id], [m].[CityId], [m].[Description], [m].[Name]
FROM [PointsOfInterest] AS [m]
WHERE [m].[CityId] = @__cityId_0
2020-06-16 13:55:37.7149|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.PointsOfInterestController.GetPointsOfInterest (CityAPI) in 309.9226ms
2020-06-16 13:55:37.7214|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 521.081ms 200 application/json; charset=utf-8
2020-06-16 13:55:45.0093|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/2/pointsofinterest/4  
2020-06-16 13:55:45.0093|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityAPI.Controllers.PointsOfInterestController (CityAPI).
2020-06-16 13:55:45.0202|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.PointsOfInterestController.GetPointOfInterest (CityAPI) - Validation state: Valid
2020-06-16 13:55:45.0202|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 13:55:45.0453|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CityId], [m].[Description], [m].[Name]
FROM [PointsOfInterest] AS [m]
WHERE ([m].[CityId] = @__cityId_0) AND ([m].[Id] = @__id_1)
2020-06-16 13:55:45.0518|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.PointsOfInterestController.GetPointOfInterest (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.0545ms.
2020-06-16 13:55:45.0518|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityAPI.Entities.PointOfInterest'.
2020-06-16 13:55:45.0518|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.PointsOfInterestController.GetPointOfInterest (CityAPI) in 42.1345ms
2020-06-16 13:55:45.0694|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 59.4974ms 200 application/json; charset=utf-8
2020-06-16 14:14:50.4306|INFO|CityAPI.Program|initializing application...
2020-06-16 14:14:52.7659|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 14:14:53.8621|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 14:14:53.9005|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 14:15:04.2039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (261ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 14:15:04.2669|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 14:15:04.3313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 14:15:04.3313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 14:15:04.3313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 14:15:04.3535|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 14:15:04.3703|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 14:15:04.3703|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 14:15:04.3813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 14:15:04.3813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 14:15:04.3813|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 14:15:04.4344|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 14:15:04.4443|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 14:15:04.4580|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 14:15:04.4795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 14:15:04.4795|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 14:15:04.5348|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 14:15:04.8328|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 14:15:04.8328|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 14:15:04.8558|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 26.4734ms 200 
2020-06-16 14:15:04.9423|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 113.5363ms 404 text/plain
2020-06-16 14:25:23.8983|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/4  
2020-06-16 14:25:23.9443|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 14:25:24.2179|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 14:25:24.2573|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 14:25:24.4061|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [m]
        WHERE [m].[Id] = @__cityId_0)
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2020-06-16 14:25:24.4336|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
2020-06-16 14:25:24.4613|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 235.1656ms.
2020-06-16 14:25:24.4721|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'null'.
2020-06-16 14:25:24.4721|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 528.061ms
2020-06-16 14:25:24.4891|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 589.9528ms 204 
2020-06-16 14:25:31.8779|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/7  
2020-06-16 14:25:31.8779|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 14:25:31.8903|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 14:25:31.8903|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 14:25:31.8903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [m]
        WHERE [m].[Id] = @__cityId_0)
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2020-06-16 14:25:31.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Name]
FROM [Cities] AS [m]
WHERE [m].[Id] = @__cityId_0
2020-06-16 14:25:31.9180|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.3887ms.
2020-06-16 14:25:31.9180|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'null'.
2020-06-16 14:25:31.9180|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 39.1316ms
2020-06-16 14:25:31.9366|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 55.9843ms 204 
2020-06-16 14:34:42.1240|INFO|CityAPI.Program|initializing application...
2020-06-16 14:34:44.4548|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 14:34:45.5090|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-06-16 14:34:45.5478|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-06-16 14:34:55.8280|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (227ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-06-16 14:34:55.8977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-06-16 14:34:55.9934|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-06-16 14:34:55.9934|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-06-16 14:34:56.0079|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-06-16 14:34:56.0079|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612150629_CityDbInitialMigration'.
2020-06-16 14:34:56.0355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2020-06-16 14:34:56.0355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] int NOT NULL IDENTITY,
    [CityId] int NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2020-06-16 14:34:56.0529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_PointOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2020-06-16 14:34:56.0529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612150629_CityDbInitialMigration', N'2.1.11-servicing-32099');
2020-06-16 14:34:56.0682|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200612175806_SampleData'.
2020-06-16 14:34:56.1157|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 14:34:56.1323|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 14:34:56.1445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-06-16 14:34:56.1605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, N'The most visited urban park in the United States.', N'Central Park'),
(2, 1, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building'),
(3, 2, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral'),
(4, 2, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station'),
(5, 3, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower'),
(6, 3, N'The world''s largest museum.', N'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2020-06-16 14:34:56.1605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200612175806_SampleData', N'2.1.11-servicing-32099');
2020-06-16 14:34:56.2279|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\PWANDREI\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-06-16 14:34:56.8135|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/  
2020-06-16 14:34:56.8135|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 DEBUG http://localhost:57208/  0
2020-06-16 14:34:56.8135|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request starting HTTP/1.1 GET http://localhost:44349/api/cities/7  
2020-06-16 14:34:56.8508|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 33.2599ms 200 
2020-06-16 14:34:56.9403|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 132.5501ms 404 text/plain
2020-06-16 14:34:56.9932|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityAPI.Controllers.CitiesController (CityAPI).
2020-06-16 14:34:57.3747|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executing action method CityAPI.Controllers.CitiesController.GetCity (CityAPI) - Validation state: Valid
2020-06-16 14:34:57.3946|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 2.1.11-servicing-32099 initialized 'CityContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-06-16 14:34:57.4854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [m]
        WHERE [m].[Id] = @__cityId_0)
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
2020-06-16 14:34:57.5021|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action method CityAPI.Controllers.CitiesController.GetCity (CityAPI), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 120.4222ms.
2020-06-16 14:34:57.5124|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2020-06-16 14:34:57.5203|INFO|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|Executed action CityAPI.Controllers.CitiesController.GetCity (CityAPI) in 520.7531ms
2020-06-16 14:34:57.5203|INFO|Microsoft.AspNetCore.Hosting.Internal.WebHost|Request finished in 719.8886ms 404 text/plain; charset=utf-8
